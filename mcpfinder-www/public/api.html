<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MCPFinder Documentation</title>
  <meta name="description" content="API documentation for MCPFinder, the AI tool discovery platform. Learn how to register and search for MCP tools.">
  
  <!-- Minimal AI/ML metadata for API page -->
  <meta name="ai:description" content="MCPFinder REST API documentation. Endpoints include tool registration (/api/v1/register), retrieval (/api/v1/tools/:id), and search (/api/v1/search).">
  <meta name="ai:api-endpoint" content="https://mcpfinder.dev/api/v1/">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Favicon and manifest -->
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="manifest" href="manifest.json">
  
  <script>
    // Inherit Tailwind config from index.html for consistency
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#eef2ff',
              100: '#e0e7ff',
              200: '#c7d2fe',
              300: '#a5b4fc',
              400: '#818cf8',
              500: '#6366f1',
              600: '#4f46e5',
              700: '#4338ca',
              800: '#3730a3',
              900: '#312e81',
            },
            secondary: {
              50: '#ecfdf5',
              100: '#d1fae5',
              200: '#a7f3d0',
              300: '#6ee7b7',
              400: '#34d399',
              500: '#10b981',
              600: '#059669',
              700: '#047857',
              800: '#065f46',
              900: '#064e3b',
            },
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
        }
      }
    }
  </script>
  
  <style>
    /* Custom styles from index.html needed for consistency */
    .gradient-text {
      background: linear-gradient(90deg, #4f46e5, #10b981);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .code-block::-webkit-scrollbar {
      height: 8px;
    }
    
    .code-block::-webkit-scrollbar-track {
      background: #1e293b; /* bg-gray-800 */
    }
    
    .code-block::-webkit-scrollbar-thumb {
      background: #475569; /* bg-gray-600 */
      border-radius: 4px;
    }
    
    .api-endpoint {
      scroll-margin-top: 100px; /* Offset for fixed header */
    }
  </style>
</head>
<body class="font-sans text-gray-800 bg-gray-50">

  <!-- Header Placeholder -->
  <div id="header-placeholder"></div>

  <!-- Main API Content -->
  <main class="pt-24 pb-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-bold tracking-tight">
          <span class="gradient-text">Documentation</span>
        </h1>
        <p class="mt-4 text-xl text-gray-600 max-w-3xl mx-auto">
          Comprehensive documentation for MCP Finder: installation, tool integration, and REST API reference.
        </p>
      </div>

      <!-- Docs Tab Navigation -->
      <nav class="mt-8 border-b border-gray-200">
        <ul class="flex -mb-px space-x-4 justify-center">
          <li>
            <a href="#mcp-server" class="inline-block p-4 text-blue-600 border-b-2 border-blue-600 rounded-t-lg">MCP Server</a>
          </li>
          <li>
            <a href="#tools" class="inline-block p-4 text-gray-600 hover:text-blue-600 rounded-t-lg">MCP Tools</a>
          </li>
          <li>
            <a href="#api" class="inline-block p-4 text-gray-600 hover:text-blue-600 rounded-t-lg">API Reference</a>
          </li>
        </ul>
      </nav>

      <!-- MCP Server Installation Section -->
      <section id="mcp-server" class="p-6 bg-white rounded-lg shadow-sm border border-gray-200 mt-8">
        <h2 class="text-2xl font-semibold mb-4">MCP Server Installation</h2>
        <p class="text-gray-600 mb-4">Instructions for integrating the MCP Finder Server with your LLM client applications (Cursor, Claude Desktop, Windsurf):</p>
        <ul class="list-disc list-inside text-gray-600 space-y-2">
          <li><strong>Cursor</strong>: Run <code>npx mcpfinder-server --stdio</code> after installing via npm or npx.</li>
          <li><strong>Claude Desktop</strong>: Use <code>mcpfinder-server</code> as an stdio transport plugin; see client settings.</li>
          <li><strong>Windsurf</strong>: Add the tool entry in <code>~/.codeium/windsurf/mcp_config.json</code>.</li>
        </ul>
      </section>

      <!-- MCP Tools Overview Section -->
      <section id="tools" class="p-6 bg-white rounded-lg shadow-sm border border-gray-200 mt-8">
        <h2 class="text-2xl font-semibold mb-4">MCP Tools Overview</h2>
        <ul class="list-disc list-inside text-gray-600 space-y-2">
          <li><strong>search_mcp_servers</strong>: Discover new MCP servers/tools (required first step for missing capabilities).</li>
          <li><strong>get_mcp_server_details</strong>: Retrieve manifest and installation hints for a specific server/tool.</li>
          <li><strong>add_mcp_server_config</strong>: Add or update an MCP server entry in your client's configuration file.</li>
          <li><strong>remove_mcp_server_config</strong>: Remove an MCP server entry from your client's configuration file.</li>
        </ul>
      </section>

      <!-- Begin API Reference -->
      <div id="api" class="space-y-12 mt-8">
        
        <!-- Link to OpenAPI Spec -->
        <div class="mb-8 text-center">
          <a href="openapi.yaml" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h4a1 1 0 100-2H7z" clip-rule="evenodd" />
            </svg>
            View OpenAPI 3.1 Specification (openapi.yaml)
          </a>
        </div>

        <!-- Base URL -->
        <div class="mb-12 p-4 bg-white rounded-lg shadow-sm border border-gray-200">
          <h2 class="text-2xl font-semibold text-gray-900 mb-2">Base URL</h2>
          <p class="text-gray-600">All API endpoints are relative to the following base URL:</p>
          <code class="block mt-2 p-3 bg-gray-100 text-gray-800 rounded text-sm overflow-x-auto">
            https://mcpfinder.dev/api/v1
          </code>
        </div>

        <!-- Authentication -->
        <div class="mb-12 p-4 bg-white rounded-lg shadow-sm border border-gray-200">
          <h2 class="text-2xl font-semibold text-gray-900 mb-2">Authentication</h2>
          <p class="text-gray-600 mb-4">The <code class="bg-gray-200 px-1 rounded text-sm">/api/v1/register</code> endpoint requires authentication using an HMAC signature passed in the <code class="bg-gray-200 px-1 rounded text-sm">Authorization</code> header.</p>
          <p class="text-gray-600">Format: <code class="bg-gray-200 px-1 rounded text-sm">Authorization: HMAC &lt;signature&gt;</code></p>
          <p class="text-gray-600 mt-2">The signature should be calculated using the shared <code class="bg-gray-200 px-1 rounded text-sm">MCP_REGISTRY_SECRET</code> and the raw request body (the MCP JSON manifest).</p>
          <p class="text-gray-600 mt-4">GET endpoints (<code class="bg-gray-200 px-1 rounded text-sm">/api/v1/tools/:id</code> and <code class="bg-gray-200 px-1 rounded text-sm">/api/v1/search</code>) do not require authentication and have CORS enabled (<code class="bg-gray-200 px-1 rounded text-sm">*</code>).</p>
        </div>

        <!-- API Endpoints Section -->
        <div class="space-y-12">
          
          <!-- POST /register -->
          <section id="register" class="api-endpoint p-6 bg-white rounded-lg shadow-sm border border-gray-200">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">Register Tool</h2>
            <div class="flex items-center space-x-3 mb-4">
              <span class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800">POST</span>
              <code class="text-lg font-mono text-gray-700">/register</code>
            </div>
            <p class="text-gray-600 mb-6">Registers a new MCP tool. Requires HMAC authentication. Validates the provided manifest against the schema, pings the tool URL, stores the manifest, updates tags, and returns the new tool ID.</p>
            
            <h3 class="text-xl font-semibold text-gray-800 mb-2">Request Body</h3>
            <p class="text-gray-600 mb-2">A valid <code class="bg-gray-200 px-1 rounded text-sm">mcp.json</code> manifest object, validated using internal logic based on the <a href="https://github.com/mcpfinder/mcpfinder/blob/main/schemas/mcp.v0.1.schema.json" target="_blank" rel="noopener noreferrer" class="text-primary-600 hover:underline">intended schema</a>.</p>
            <div class="bg-gray-900 rounded-lg shadow overflow-hidden mt-4">
              <div class="bg-gray-800 px-4 py-2 text-gray-200 text-sm">Example Request Body (application/json)</div>
              <pre class="p-4 text-gray-300 font-mono text-sm overflow-x-auto code-block"><code>{
  "name": "ExampleTool",
  "description": "An example MCP tool.",
  "url": "https://example-tool.com/mcp",
  "protocol_version": "MCP/1.0",
  "capabilities": [
    { "name": "doSomething", "type": "action" }
  ],
  "tags": ["example", "demo"],
  "auth": { "type": "none" }
}</code></pre>
            </div>

            <h3 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Responses</h3>
            <div class="space-y-4">
              <div>
                <p><strong class="text-green-600">200 OK</strong> - Success</p>
                <div class="bg-gray-900 rounded-lg shadow overflow-hidden mt-2">
                  <div class="bg-gray-800 px-4 py-2 text-gray-200 text-sm">Example Response Body (application/json)</div>
                  <pre class="p-4 text-gray-300 font-mono text-sm overflow-x-auto code-block"><code>{
  "success": true,
  "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "status": "online" // Initial status after successful ping
}</code></pre>
                </div>
              </div>
              <div>
                <p><strong class="text-red-600">400 Bad Request</strong> - Invalid JSON, schema validation failed, or tool URL ping failed.</p>
              </div>
               <div>
                <p><strong class="text-red-600">401 Unauthorized</strong> - Missing or invalid HMAC signature.</p>
              </div>
               <div>
                <p><strong class="text-red-600">500 Internal Server Error</strong> - Storage or other server-side issue.</p>
              </div>
            </div>
          </section>

          <!-- GET /tools/:id -->
          <section id="get-tool" class="api-endpoint p-6 bg-white rounded-lg shadow-sm border border-gray-200">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">Get Tool Details</h2>
            <div class="flex items-center space-x-3 mb-4">
              <span class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800">GET</span>
              <code class="text-lg font-mono text-gray-700">/tools/:id</code>
            </div>
            <p class="text-gray-600 mb-6">Retrieves the full manifest JSON for a specific tool by its unique ID.</p>

            <h3 class="text-xl font-semibold text-gray-800 mb-2">Path Parameters</h3>
            <ul class="list-disc pl-6 text-gray-600">
              <li><code class="bg-gray-200 px-1 rounded text-sm">id</code> (string, required): The unique identifier of the tool.</li>
            </ul>

            <h3 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Responses</h3>
             <div class="space-y-4">
              <div>
                <p><strong class="text-green-600">200 OK</strong> - Success</p>
                <div class="bg-gray-900 rounded-lg shadow overflow-hidden mt-2">
                  <div class="bg-gray-800 px-4 py-2 text-gray-200 text-sm">Example Response Body (application/json)</div>
                  <pre class="p-4 text-gray-300 font-mono text-sm overflow-x-auto code-block"><code>{
  "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "name": "ExampleTool",
  "description": "An example MCP tool.",
  "url": "https://example-tool.com/mcp",
  "protocol_version": "MCP/1.0",
  "capabilities": [
    { "name": "doSomething", "type": "action" }
  ],
  "tags": ["example", "demo"],
  "auth": { "type": "none" },
  "status": "online", // Current health status
  "lastChecked": "2025-01-15T10:30:00Z"
}</code></pre>
                </div>
              </div>
              <div>
                <p><strong class="text-red-600">404 Not Found</strong> - Tool with the specified ID does not exist.</p>
              </div>
            </div>
          </section>

          <!-- GET /search -->
          <section id="search" class="api-endpoint p-6 bg-white rounded-lg shadow-sm border border-gray-200">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4">Search Tools</h2>
            <div class="flex items-center space-x-3 mb-4">
              <span class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800">GET</span>
              <code class="text-lg font-mono text-gray-700">/search</code>
            </div>
            <p class="text-gray-600 mb-6">Searches for tools based on tags or a keyword query. Returns a list of tool summaries.</p>

            <h3 class="text-xl font-semibold text-gray-800 mb-2">Query Parameters</h3>
            <ul class="list-disc pl-6 text-gray-600 space-y-1">
              <li><code class="bg-gray-200 px-1 rounded text-sm">tag</code> (string, optional): Filter tools by a specific tag.</li>
              <li><code class="bg-gray-200 px-1 rounded text-sm">q</code> (string, optional): Search for tools matching the keyword in their name or description.</li>
            </ul>
            <p class="text-sm text-gray-500 mt-2">Note: Provide either <code class="bg-gray-200 px-1 rounded text-sm">tag</code> or <code class="bg-gray-200 px-1 rounded text-sm">q</code>, not both. If neither is provided, potentially returns all tools (behavior TBD, might require pagination later).</p>

            <h3 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Responses</h3>
            <div class="space-y-4">
              <div>
                <p><strong class="text-green-600">200 OK</strong> - Success</p>
                <div class="bg-gray-900 rounded-lg shadow overflow-hidden mt-2">
                  <div class="bg-gray-800 px-4 py-2 text-gray-200 text-sm">Example Response Body (application/json)</div>
                  <pre class="p-4 text-gray-300 font-mono text-sm overflow-x-auto code-block"><code>[
  {
    "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "name": "ExampleTool",
    "description": "An example MCP tool.",
    "url": "https://example-tool.com/mcp",
    "status": "online",
    "tags": ["example", "demo"]
  },
  {
    "id": "f0e9d8c7-b6a5-4321-fedc-ba9876543210",
    "name": "Another Tool",
    "description": "Does something else.",
    "url": "https://another-tool.org/mcp",
    "status": "offline",
    "tags": ["example", "utility"]
  }
]</code></pre>
                </div>
              </div>
               <div>
                <p><strong class="text-red-600">400 Bad Request</strong> - Invalid query parameters.</p>
              </div>
            </div>
          </section>

        </div>
      </div>
    </div>
  </main>

  <!-- Footer Placeholder -->
  <div id="footer-placeholder"></div>

  <!-- JavaScript for loading components -->
  <script>
    // Function to load HTML content into a placeholder
    async function loadComponent(url, placeholderId) {
      try {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`Failed to fetch ${url}: ${response.statusText}`);
        }
        const html = await response.text();
        document.getElementById(placeholderId).innerHTML = html;
      } catch (error) {
        console.error('Error loading component:', error);
        document.getElementById(placeholderId).innerHTML = `<p class="text-red-500 text-center">Error loading component: ${url}</p>`;
      }
    }

    // Load header and footer, then initialize interactive elements
    async function initializePage() {
      await Promise.all([
        loadComponent('header.html', 'header-placeholder'),
        loadComponent('footer.html', 'footer-placeholder')
      ]);

      // Mobile menu toggle (needs to run AFTER header is loaded)
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      if (mobileMenuButton && mobileMenu) {
          mobileMenuButton.addEventListener('click', function() {
              mobileMenu.classList.toggle('hidden');
          });
      } else {
          console.warn('Mobile menu elements not found after loading header.');
      }
      
      // Smooth scroll for anchor links targeting API sections on THIS page
      document.querySelectorAll('#header-placeholder a[href^="#"], main a[href^="#"]').forEach(anchor => {
          const targetId = anchor.hash;
          if(targetId && anchor.pathname === window.location.pathname) { // Only handle same-page links
            anchor.addEventListener('click', function (e) {
              e.preventDefault();
              const targetElement = document.querySelector(targetId);
              if (targetElement) {
                window.scrollTo({
                  top: targetElement.offsetTop - 80, // Adjust for fixed header
                  behavior: 'smooth'
                });
                // Close mobile menu if open
                const mobileMenu = document.getElementById('mobile-menu');
                if(mobileMenu) {
                  mobileMenu.classList.add('hidden');
                }
              }
            });
          }
        });
    }

    // Initialize the page when the DOM is ready
    document.addEventListener('DOMContentLoaded', initializePage);
  </script>

</body>
</html> 